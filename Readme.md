# uLogin

Donate link: http://ulogin.ru  
Tags: ulogin, login, social, authorization  
Requires at least: 11.0.0  
Tested up to: 15.0.6  
Stable tag: 2.0.1  
License: GNU General Public License, version 2  

**uLogin** — это инструмент, который позволяет пользователям получить единый доступ к различным Интернет-сервисам без необходимости повторной регистрации,
а владельцам сайтов — получить дополнительный приток пользователей из социальных сетей и популярных порталов (Google, Яндекс, Mail.ru, ВКонтакте, Facebook и др.)

## Установка (Marketplace)

- Зайдите в раздел администрирования Marketplace.
- Найдите модуль **ulogin**, прописав в поле поиска *ulogin*, и установите его.
- Используейте виджет uLogin в визуальном HTML-редакторе, в качестве Служебного компонента.
- Установленный модуль заработает сразу после активации с настройками по умолчанию.

## Установка (Вручную)

- Скачайте модуль с GitHub.
- Распакуйте содержимое архива в папку bitrix\modules\talkhard.ulogin\
- Установите модуль uLogin в Администрирование - Marketplace - Установленные решения.

Более детальную информацию смотрите на сайте https://ulogin.ru/help.php

## Модуль "uLogin"

Данный модуль находится в визуальном HTML-редакторе, в качестве компонента *Служебные*.

####Компонент *Ulogin*:
Настройки:

**uLogin ID общая форма №1:** общее поле для всех виджетов uLogin, необязательный параметр (см. *"Настройки виджета uLogin"*);
**uLogin ID общая форма №2:** дополнительное общее поле для всех виджетов uLogin, необязательный параметр (см. *"Настройки виджета uLogin"*);
**Отправлять email администратору при регистрации пользователя:** установите флажок, если необходимо выслать письмо администратору при регистрации через uLogin;
**Сохранять ссылку на страницу пользователя в соцсети:** установите флажок, если необходимо сохранять ссылку на страницу пользователя в соцсети при регистрации через uLogin;
**Группа клиентов по умолчанию:** группа, присваиваемая пользователям, зарегистрированных с помощью uLogin. По умолчанию "Зарегистрированные пользователи";

####Компонент *Ulogin_sync*:
Настройки:

**ulogin ID для панели синхронизации №1:** общее поле для всех виджетов uLogin, необязательный параметр (см. *"Настройки виджета uLogin"*);
**ulogin ID для панели синхронизации №2:** дополнительное общее поле для всех виджетов uLogin, необязательный параметр (см. *"Настройки виджета uLogin"*);

Более детальную информацию смотрите на сайте https://ulogin.ru/help.php

## Настройки виджета uLogin

При установке расширения uLogin авторизация пользователей будет осуществляться с настройками по умолчанию.
Для более детальной настройки виджетов uLogin Вы можете воспользоваться сервисом uLogin.

Вы можете создать свой виджет uLogin и редактировать его самостоятельно:

для создания виджета необходимо зайти в Личный Кабинет (ЛК) на сайте http://ulogin.ru/lk.php
добавить свой сайт к списку Мои сайты и на вкладке Виджеты добавить новый виджет. После этого вы можете отредактировать свой виджет.

В графе «Возвращаемые поля профиля пользователя» вы можете включить поля, например, **Пол** и **Дата рождения**.

**Важно!** Для успешной работы плагина необходимо включить в обязательных полях профиля поле **Еmail** в Личном кабинете uLogin.
Заполнять поля в графе «Тип авторизации» не нужно, т.к. расширение uLogin настроено на автоматическое заполнение данных параметров.

Созданный в Личном Кабинете виджет имеет параметры **uLogin ID**.
Скопируйте значение **uLogin ID** вашего виджета в соответствующее поле в настройках плагина на вашем сайте и сохраните настройки.

Если всё было сделано правильно, виджет изменится согласно вашим настройкам.


## Особенности

Для вывода панели *авторизации* в любом месте шаблона темы 1C Bitrix используйте визуальный редактор страницы,
и просто перетащите Служебный Компонент *Ulogin* в то место, куда ходите установить панель авторизации.


Для вывода панели *синхронизации* в любом месте шаблона темы 1C Bitrix используйте визуальный редактор страницы,
и просто перетащите Служебный Компонент *Ulogin_sync* в то место, куда ходите установить панель синхронизации, например, в профиль пользователя.

Для использования панели авторизации в редакторе php-кода 1C Bitrix используйте код:


## Изменения

####2.0.1.
 - В архив на GitHub добавлены все файлы модуля;
 - Добавлена настройка плагина: сохранение ссылки на соц.профиль в поле PERSONAL_WWW
 - Исправлен баг, когда данные о пользователе не записывались в базу.
 - Добавлено заполнение дополнительной информации о пользователе: телефон, город, страна.
 - Аттрибут id панели виджета заменён на class;

####2.0.0.
 - Полное изменение логики модуля;
 - Функционал модуля вынесен в отдельный класс ulogin;
 - Исправлена ошибка дублирования аккаунта пользователя;
 - Исправлена ошибка c отсутствием параметров по умолчанию;
 - Добавленио создание и использование таблицы ulogin_users;
 - Рефакторинг кода;

####1.0.0.
*В свойствах компонента добалено:
 - Вкл\выкл уникальности email;
 - Вкл\выкл отправки уведомлений о новом пользователе;
 - Добавлен компонент привязки социальных сетей, предоставляемых uLogin, к текущему профилю;
 - Добавлены минорные изменения в свойствах компонента Ulogin:auth;
 - Добавлена обработка ошибки при получении данных пользователя с помощью токена от uLogin;
 - Добавлена конвертация имен пользователей в кодировку сайта.
  
*Исправлена ошибка создания аккаунта пользователя.
	
